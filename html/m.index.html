<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<title>Cryptobox Mobile</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" type="text/css" href="../html/extern/jquery-mobile/jquery.mobile-1.1.0.css" />

		<script type="text/javascript" src="../html/extern/jquery/jquery-1.7.2.min.js"></script>
		<script type="text/javascript" src="../html/extern/jquery-mobile/jquery.mobile-1.1.0.min.js"></script>

		<script type="text/javascript" src="../html/extern/cjs/crypto/crypto-min.js"></script>
		<script type="text/javascript" src="../html/extern/cjs/blockmodes/blockmodes-min.js"></script>
		<script type="text/javascript" src="../html/extern/cjs/aes/aes-min.js"></script>
		<script type="text/javascript" src="../html/extern/cjs/hmac/hmac-min.js"></script>
		<script type="text/javascript" src="../html/extern/cjs/sha1/sha1-min.js"></script>
		<script type="text/javascript" src="../html/extern/cjs/pbkdf2/pbkdf2-min.js"></script>

		<script type="text/javascript" src="../html/js/login.js"></script>
		<script type="text/javascript" src="../html/js/jquery-mobile.js"></script>
		<script type="text/javascript" src="../html/js/view.js"></script>
		<script type="text/javascript" src="../html/js/crypto.js"></script>

		<script type="text/javascript">
$(document).ready(function() {

	$("#form-unlock").submit(function(event) {
		event.preventDefault();

		try {
			map = unlock($("#input-password").val());
			$("#input-password").val("");

			for (var key in map.list) {
				$("#div-" + key).html(map.list[key]);
				$("body").append(map.page[key]);
			}
		} catch(e) {
			alert("Incorrect password! " + e);
			return;
		}

		$.mobile.changePage("#main", "slideup");
	});

	$(".button-lock").click(function () {
		$(".generated").remove();
		$.mobile.changePage("#login", "slideup");
	});

	$("#input-password").focus();
});

		</script>
</head>
<body>
	<div data-role="page" id="login">
		<div data-role="header">
			<h1>Login</h1>
		</div>

		<div data-role="content">
			<form id="form-unlock" action="#main" method="get" data-ajax="false">
				<label for="input-password">Password:</label>
				<input type="password" id="input-password" value=""  />
				<input type="submit" value="Unlock"  />
			</form>
		</div>
	</div>

	<div data-role="page" id="main">
		<div data-role="header">
			<h1>Cryptobox</h1>
			<a data-rel="back" href="#" data-icon="arrow-l">Back</a>
			<a class="button-lock" href="#" data-icon="delete">Lock</a>
		</div>

		<div data-role="content">
			<ul data-role="listview" data-inset="true">
				<li><a href="#site">Sites</a></li>
				<li><a href="#app">Apps</a></li>
				<li><a href="#bookmark">Bookmarks</a></li>
				<li><a href="#card">Cards</a></li>
				<li><a href="#note">Notes</a></li>
			</ul>
		</div>
	</div>

	<div data-role="page" id="site">
		<div data-role="header">
			<h1>Sites</h1>
			<a data-rel="back" href="#" data-icon="arrow-l">Back</a>
			<a class="button-lock" href="#" data-icon="delete">Lock</a>
		</div>

		<div data-role="content">
			<div class="content-primary" id="div-site"></div>
		</div>
	</div>

	<div data-role="page" id="app">
		<div data-role="header">
			<h1>Apps</h1>
			<a data-rel="back" href="#" data-icon="arrow-l">Back</a>
			<a class="button-lock" href="#" data-icon="delete">Lock</a>
		</div>

		<div data-role="content">
			<div class="content-primary" id="div-app"></div>
		</div>
	</div>

	<div data-role="page" id="bookmark">
		<div data-role="header">
			<h1>Bookmarks</h1>
			<a data-rel="back" href="#" data-icon="arrow-l">Back</a>
			<a class="button-lock" href="#" data-icon="delete">Lock</a>
		</div>

		<div data-role="content">
			<div class="content-primary" id="div-bookmark"></div>
		</div>
	</div>

	<div data-role="page" id="card">
		<div data-role="header">
			<h1>Cards</h1>
			<a data-rel="back" href="#" data-icon="arrow-l">Back</a>
			<a class="button-lock" href="#" data-icon="delete">Lock</a>
		</div>

		<div data-role="content">
			<div class="content-primary" id="div-card"></div>
		</div>
	</div>

	<div data-role="page" id="note">
		<div data-role="header">
			<h1>Notes</h1>
			<a data-rel="back" href="#" data-icon="arrow-l">Back</a>
			<a class="button-lock" href="#" data-icon="delete">Lock</a>
		</div>

		<div data-role="content">
			<div class="content-primary" id="div-note"></div>
		</div>
	</div>
</body>
</html>
