<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

		<title>Cryptobox</title>
		<link rel="stylesheet" type="text/css" href="../template/css/style.css" />
		<link rel="stylesheet" type="text/css" href="../template/css/theme/jquery-ui-1.8.20.custom.css" />

		<script type="text/javascript" src="../template/js/jquery-1.7.2.js"></script>
		<script type="text/javascript" src="../template/js/jquery-ui-1.8.20.custom.min.js"></script>

		<script type="text/javascript" src="../template/js/open.js"></script>
		<script type="text/javascript" src="../template/js/view.js"></script>
		<script type="text/javascript" src="../template/js/password.js"></script>

		<script type="text/javascript" src="../template/js/seedrandom.js"></script>

		<script type="text/javascript" src="../template/js/cjs/crypto/crypto.js"></script>
		<script type="text/javascript" src="../template/js/cjs/blockmodes/blockmodes.js"></script>
		<script type="text/javascript" src="../template/js/cjs/aes/aes.js"></script>
		<script type="text/javascript" src="../template/js/cjs/hmac/hmac.js"></script>
		<script type="text/javascript" src="../template/js/cjs/sha1/sha1.js"></script>
		<script type="text/javascript" src="../template/js/cjs/pbkdf2/pbkdf2.js"></script>

		<script type="text/javascript" src="./cfg.js"></script>
		<script type="text/javascript" src="../template/js/crypto.js"></script>

		<script type="text/javascript">

$(document).ready(function() {
	$("#divUnlocked").hide();
	$("#divLocked").show();

	$("#tabs").tabs();

	$("#inputUnlock").button();

	/*
	$("#bookmarkletForm").button();
	$("#bookmarkletToken").button();
	*/

	$("#formUnlock").submit(function(event) {
		event.preventDefault();

		try {
			unlock($("#inputPassword").val());
			$("#inputPassword").val("");
			$("#divLocked").hide();
			$("#divUnlocked").show();

			$("#divGenerate").hide();
		} catch(e) {
			alert("Incorrect password! " + e);
			return;
		}

	});

	$("#buttonLock").button();
	$("#buttonLock").click(function(event) {
		event.preventDefault();
		$("#divLocked").show();
		$("#divUnlocked").hide();
	});

	$("#buttonGenerateShow").button();
	$("#buttonGenerateShow").click(function(event) {
		event.preventDefault();
		$("#divGenerate").show();
	});

	$("#buttonGenerateClose").button();
	$("#buttonGenerateClose").click(function(event) {
		event.preventDefault();
		$("#divGenerate").hide();
	});

	$("#buttonGenerate").button();
	$("#buttonGenerate").click(function(event) {
		$("#divGeneratedPassword").html(generatePassword(
			$("#inputPasswordLength").val(),
			$("#inputIncludeNum").is(":checked"),
			$("#inputIncludePunc").is(":checked"),
			$("#inputIncludeUc").is(":checked"),
			$("#inputPronounceable").is(":checked")));
	});

	$("#inputPassword").focus();
});
		</script>
	</head>
	<body>
		<noscript>
			Sorry, this thing heavily depends on JavaScript.
		</noscript>

		<div id="divLocked">
			<div id="wrapper">
				<div id="container">
					<form id="formUnlock">
						<h1>Enter password to unlock</h1>
						<p><input id="inputPassword" type="password" /></p>
						<p><input id="inputUnlock" type="submit" value="Unlock" /></p>
					</form>

				</div>
			</div>
		</div>

		<div id="divUnlocked">
			<div id="header">
				<button id="buttonGenerateShow">Generate password</button>
				<button id="buttonLock">Lock</button>
			</div>

			<div id="tabs">
				<ul>
					<li><a href="#site">Sites</a></li>
					<li><a href="#app">Apps</a></li>
					<li><a href="#bookmark">Bookmarks</a></li>
					<li><a href="#card">Cards</a></li>
					<li><a href="#note">Notes</a></li>
					<li><a href="#plaintext">JSON</a></li>
					<li><a href="#bookmarklet">Bookmarklets</a></li>
				</ul>

				<div id="site"></div>
				<div id="app"></div>
				<div id="bookmark"></div>
				<div id="card"></div>
				<div id="note"></div>
				<div id="plaintext"></div>
				<div id="bookmarklet">
					<p><a id="bookmarkletForm" href="javascript:javascript:(function(){_my_script=document.createElement('SCRIPT');_my_script.type='text/javascript';_my_script.src='https://raw.github.com/fomichev/cryptobox/master/template/bookmarklet/form.js';document.getElementsByTagName('head')[0].appendChild(_my_script);})();">Parse form</a></p>

					<p><a id="bookmarkletToken" href="javascript:javascript:(function(){_my_script=document.createElement('SCRIPT');_my_script.type='text/javascript';_my_script.src='https://raw.github.com/fomichev/cryptobox/master/template/bookmarklet/token.js';document.getElementsByTagName('head')[0].appendChild(_my_script);})();">Get token</a></p>
				</div>
			</div>

			<div id="divGenerate" class="password_box">
				<form>
					<input type="text" id="inputPasswordLength" value="16">Password length<br />
					<input type="checkbox" id="inputIncludeNum" checked>Include numbers<br />
					<input type="checkbox" id="inputIncludePunc" checked>Include punctuation<br />
					<input type="checkbox" id="inputIncludeUc" checked>Include upper case<br />
					<input type="checkbox" id="inputPronounceable">Make pronounceable<br />
				</form>

				Generated password: <div id="divGeneratedPassword"></div>

				<a href="#" id="buttonGenerate">Generate</a>
				<a href="#" id="buttonGenerateClose">Close</a>
			</div>

			<div id="copyright"><p>&copy; <a href="mailto:s@fomichev.me">Stanislav Fomichev</a>, 2012</p></div>
		</div>
	</body>
</html>
